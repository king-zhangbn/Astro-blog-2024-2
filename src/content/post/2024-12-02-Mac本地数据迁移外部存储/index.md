---
title: Mac本地数据迁移外部存储
description: Mac 下迁移本地App数据到外部存储调用非外部安装 App，本文已迁移微信聊天记录为例子
publishDate: 2024-12-02
tags:
  - 折腾分享
language: CH
---
> Mac 的存储空间如同金子一般价格逆天离谱，丐版的 Mac 如何生存，请看本集教程

## EG.1 举个栗子 WeChat

如何直接将聊天记录保存在移动硬盘等外部存储里面，而不占用你Mac宝贵的硬盘空间。

### step1、寻找根目录文件

先彻底退出微信

桌面处Shift+command+G打开窗口，输入下面代码

```
~/Library/Containers/com.tencent.xinWeChat/Data/Library/Application Support/com.tencent.xinWeChat
```

找到2.0b4.0.9文件夹，把它拷贝到移动硬盘中，然后将本地硬盘中的数据文件夹先转移走暂时不要删除，但也不要让它在原地待着，总之先移动走就行，

### step2、创建链接

接着使用聚焦搜索终端，输入

```
ln（这里有个空格）-s（这里有个空格）（刚刚迁移到外部存储的文件夹2.0b4.0.9）（这里有个空格）（Mac本地的com.tencent.xinWeChat文件夹拖进终端窗口中）
```

举例如下

```
xingluo@xingluodeMacBook-Pro ~ % ln -s /Volumes（移动硬盘）/STUDIO/备份文件/微信文件/2.0b4.0.9  /Users/xingluo/Library/Containers/com.tencent.xinWeChat/Data/Library/Application\ Support/com.tencent.xinWeChat
```

### step3、运行最后一个代码

```
sudo codesign --sign - --force --deep /Applications/WeChat.app
```

按回车确认，输入管理员密码并再次按回车确认，看到这行提示后再次打开微信，

![](https://pic.en.icu/i/2024/12/02/3fem4c-0.webp)

### Q&A

如果询问你是否允许微信访问其他App中的数据，或者是否允许它访问移动移动硬盘中的数据请点击允许，提示你数据库损坏点击修复并重新登录，再次进入微信后，你会发现一切照旧，数据都在，但其实他们已经被自动存储到了你的移动硬盘中，以后收到的消息、文件也都会保存到移动硬盘。需要提醒你的是，如果你忘记插硬盘直接打开了微信，会看到数据库损坏的提示，在微信使用中拔掉硬盘也会看到类似的提示，没关系，关掉微信，插上硬盘，再重新打开即可，当你确认数据都正常，就可以将本地那份被你移走的名称巨长的文件夹彻底删除腾出空间啦。这种方法目前已知的副作用是微信的启动速度可能会变慢一点点，在接收大文件时可能出现卡顿。是否要使用，就取决于你对Mac本地硬盘空间的焦虑程度啦最后还要提醒一下，如果长期存储这些聊天记录，不要使用exFAT文件系统，不要使用U盘，一定要找一个尽可能可靠的外接硬盘，使用APFS文件系统。

次方法可以适用于任何较大占用 Mac 原始空间的 App

---

### 最后一个代码**各部分参数含义**

1. **`sudo`**：\
   它是 “superuser do” 的缩写，意味着以超级用户（也就是系统管理员权限）来执行后续的命令。因为对应用进行代码签名等操作通常需要较高的权限，普通用户权限往往是不够的，所以使用 `sudo` 来提升权限执行操作。
1. **`codesign`**：\
   这是 macOS 系统自带的用于对文件、应用等进行代码签名以及验证代码签名相关操作的命令行工具。
1. **`--sign -`**：\
   `--sign` 这个参数用于指定签名的标识，后面跟着的 `-` 在这里表示会从系统默认的钥匙串（Keychain）中获取合适的签名证书来进行签名操作，也就是会使用系统中配置好的相关开发者证书之类的凭据来签署应用。
1. **`--force`**：\
   该参数强制覆盖应用已有的签名。如果应用之前已经有过代码签名了，使用 `--force` 可以不管之前的签名情况，直接重新进行新的签名过程。
1. **`--deep`**：\
   `--deep` 参数表示进行深度签名。对于一个应用程序包（比如 `.app` 格式的应用，其内部实际是一个包含了各种资源文件、可执行文件等的文件夹结构），它不仅会对主应用的可执行文件进行签名，还会递归地对应用包内部嵌套的各种框架（Frameworks）、插件（Plugins）等附属的可执行文件及相关资源都进行代码签名，确保整个应用相关的所有组件都能被正确签名。
1. **`/Applications/WeChat.app`**：\
   明确指定了要进行代码签名操作的目标对象，即位于 `/Applications` 目录下的 “微信” 应用程序包。
